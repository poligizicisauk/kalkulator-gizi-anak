<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kalkulator Status Gizi Anak</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff9f0;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #f97316;
    }
    .form-section {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }
    label {
      display: block;
      margin: 0.5rem 0 0.2rem;
    }
    input, select, button {
      width: 100%;
      padding: 0.6rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
    }
    button {
      background-color: #f97316;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #ea580c;
    }
    .results {
      background: #fff7ed;
      padding: 1.5rem;
      border-radius: 1rem;
      margin-bottom: 2rem;
    }
    .graph-container {
      background: white;
      padding: 1rem;
      border-radius: 1rem;
      margin-bottom: 2rem;
    }
    canvas {
      max-width: 100%;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Kalkulator Status Gizi Anak</h1>
    <div class="form-section">
      <label for="usia">Usia (bulan):</label>
      <input type="number" id="usia" min="0" max="60" />

      <label for="bb">Berat Badan (kg):</label>
      <input type="number" id="bb" step="0.1" />

      <label for="tb">Tinggi Badan (cm):</label>
      <input type="number" id="tb" step="0.1" />

      <label for="jenisKelamin">Jenis Kelamin:</label>
      <select id="jenisKelamin">
        <option value="laki-laki">Laki-laki</option>
        <option value="perempuan">Perempuan</option>
      </select>

      <button onclick="hitungStatusGizi()">Hitung Status Gizi</button>
    </div>

    <div id="hasil" class="results"></div>

    <div class="graph-container">
      <canvas id="chartBBU"></canvas>
    </div>
    <div class="graph-container">
      <canvas id="chartTBU"></canvas>
    </div>
    <div class="graph-container">
      <canvas id="chartBBTB"></canvas>
    </div>
  </div>

  <script>
    function hitungStatusGizi() {
      const usia = parseInt(document.getElementById('usia').value);
      const bb = parseFloat(document.getElementById('bb').value);
      const tb = parseFloat(document.getElementById('tb').value);
      const jk = document.getElementById('jenisKelamin').value;
      const hasil = document.getElementById('hasil');

      // Dummy z-score values
      const zBBU = (bb - 10) / 1.5;
      const zTBU = (tb - 85) / 3;
      const zBBTB = (bb / (tb / 100) - 14) / 1.2;

      let statusBBU = '', saranBBU = '';
      if (zBBU < -3) { statusBBU = 'Gizi Buruk'; saranBBU = 'Perlu penanganan medis dan asupan gizi tinggi energi dan protein.'; }
      else if (zBBU < -2) { statusBBU = 'Gizi Kurang'; saranBBU = 'Berikan makanan bergizi seimbang dan pantau pertumbuhan.'; }
      else if (zBBU <= 2) { statusBBU = 'Gizi Baik'; saranBBU = 'Pertahankan pola makan dan pantau pertumbuhan rutin.'; }
      else { statusBBU = 'Gizi Lebih'; saranBBU = 'Kurangi makanan tinggi gula/lemak dan ajak aktivitas fisik.'; }

      let statusTBU = '', saranTBU = '';
      if (zTBU < -3) { statusTBU = 'Sangat Pendek'; saranTBU = 'Perlu evaluasi tumbuh kembang dan intervensi gizi.'; }
      else if (zTBU < -2) { statusTBU = 'Pendek'; saranTBU = 'Pantau pola makan dan konsultasi dengan ahli gizi.'; }
      else if (zTBU <= 2) { statusTBU = 'Normal'; saranTBU = 'Pertahankan pertumbuhan optimal anak.'; }
      else { statusTBU = 'Tinggi'; saranTBU = 'Pastikan asupan tetap seimbang sesuai usia.'; }

      let statusBBTB = '', saranBBTB = '';
      if (zBBTB < -3) { statusBBTB = 'Sangat Kurus'; saranBBTB = 'Berikan intervensi gizi dan pemeriksaan lanjutan.'; }
      else if (zBBTB < -2) { statusBBTB = 'Kurus'; saranBBTB = 'Tingkatkan asupan gizi dan pantau berat badan.'; }
      else if (zBBTB <= 2) { statusBBTB = 'Normal'; saranBBTB = 'Pertahankan berat badan ideal anak.'; }
      else { statusBBTB = 'Gemuk'; saranBBTB = 'Batasi makanan manis/berlemak dan ajak bergerak aktif.'; }

      hasil.innerHTML = `
        <h2>Hasil Status Gizi</h2>
        <p><strong>BB/U:</strong> ${statusBBU}<br/><em>Saran:</em> ${saranBBU}</p>
        <p><strong>TB/U:</strong> ${statusTBU}<br/><em>Saran:</em> ${saranTBU}</p>
        <p><strong>BB/TB:</strong> ${statusBBTB}<br/><em>Saran:</em> ${saranBBTB}</p>
      `;

      updateCharts(usia, bb, tb);
    }

    function updateCharts(usia, bb, tb) {
      const usiaArr = Array.from({ length: 61 }, (_, i) => i);
      const refBBU = usiaArr.map(u => 9 + Math.sin(u / 10));
      const refTBU = usiaArr.map(u => 75 + u * 0.5 + Math.cos(u / 8));
      const refBBTB = usiaArr.map(u => 15 + Math.sin(u / 7));

      new Chart(document.getElementById('chartBBU'), {
        type: 'line',
        data: {
          labels: usiaArr,
          datasets: [
            { label: 'BB/U (Rujukan)', data: refBBU, borderColor: 'gray', fill: false },
            { label: 'Anak', data: usiaArr.map(u => u === usia ? bb : null), borderColor: 'orange', pointBackgroundColor: 'orange', pointRadius: 5, type: 'line' }
          ]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
      });

      new Chart(document.getElementById('chartTBU'), {
        type: 'line',
        data: {
          labels: usiaArr,
          datasets: [
            { label: 'TB/U (Rujukan)', data: refTBU, borderColor: 'gray', fill: false },
            { label: 'Anak', data: usiaArr.map(u => u === usia ? tb : null), borderColor: 'orange', pointBackgroundColor: 'orange', pointRadius: 5, type: 'line' }
          ]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
      });

      new Chart(document.getElementById('chartBBTB'), {
        type: 'line',
        data: {
          labels: usiaArr,
          datasets: [
            { label: 'BB/TB (Rujukan)', data: refBBTB, borderColor: 'gray', fill: false },
            { label: 'Anak', data: usiaArr.map(u => u === usia ? bb / (tb / 100) : null), borderColor: 'orange', pointBackgroundColor: 'orange', pointRadius: 5, type: 'line' }
          ]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
      });
    }
  </script>
</body>

</html>
